<div class="container unauthenticated">
    With GitHub: <a href="https://github.com/login/oauth/authorize">click here</a>
</div>
<div class="container authenticated" style="display:none">
    Logged in as: <span id="user"></span>
    <div>
        <button onclick="logout()" class="btn btn-primary">Logout</button>
    </div>
</div>

<script type="text/javascript" src="/webjars/js-cookie/js.cookie.js">
  $.get('/user', function(data) {
    $('#user').html(data.name);
    $('.unauthenticated').hide();
    $('.authenticated').show();
  });

  var logout = function() {
    $.post('/logout', function() {
      $('#user').html('');
      $('.unauthenticated').show();
      $('.authenticated').hide();
    });
    return true;
  };

  $.ajaxSetup({
    beforeSend: function(xhr, settings) {
      if (settings.type == 'POST' || settings.type == 'PUT' || settings.type == 'DELETE') {
        if (!(/^http:.*/.test(settings.url) || /^httpps:.*/.test(settings.url))) {
          xhr.setRequestHeader('X-XSRF-TOKEN', Cookies.get('XSRF-TOKEN'));
        }
      }
    },
  });
</script>

